"use strict";Object.defineProperty(exports,"__esModule",{value:!0});const millennium_month_1=require("./millennium-month"),millennium_date_math_1=require("./millennium-date-math"),millennium_timespan_1=require("./millennium-timespan"),millennium_date_builder_1=require("./millennium-date-builder"),millennium_time_unit_1=require("./millennium-time-unit");class MillenniumDate{constructor(e,t){this.epochTime=e,this.offsetHours=void 0!==t?t:0}static fromNow(){let e=new Date;return new MillenniumDate(e.getTime(),-e.getTimezoneOffset()/60)}static fromDate(e){return new MillenniumDate(e.getTime(),-e.getTimezoneOffset()/60)}static fromEpochTime(e,t){return new MillenniumDate(e,t)}static fromTheBeginningOfTime(e){return new MillenniumDate(0,e)}isYearLeapYear(){return millennium_date_math_1.MillenniumDateMath.isYearLeapYear(this.getYear())}getYear(){let e,t=this.getAdjustedEpochTime(),i=MillenniumDate.EPOCH_YEAR+t/millennium_time_unit_1.MillenniumTimeUnit.YEAR.getMilliseconds();if(this.getAdjustedEpochTime()>=0)for(e=1972;e<Math.floor(i);)millennium_date_math_1.MillenniumDateMath.isYearLeapYear(e)&&(t-=millennium_time_unit_1.MillenniumTimeUnit.DAY.getMilliseconds(),i=MillenniumDate.EPOCH_YEAR+t/millennium_time_unit_1.MillenniumTimeUnit.YEAR.getMilliseconds()),e+=4;else for(e=1968;e>i;)millennium_date_math_1.MillenniumDateMath.isYearLeapYear(e)&&(t+=millennium_time_unit_1.MillenniumTimeUnit.DAY.getMilliseconds(),i=MillenniumDate.EPOCH_YEAR+t/millennium_time_unit_1.MillenniumTimeUnit.YEAR.getMilliseconds()),e-=4;return Math.floor(i)}getMonth(){let e=this.getYear(),t=(new millennium_date_builder_1.MillenniumDateBuilder).withYear(e).build(),i=millennium_timespan_1.MillenniumTimespan.between(t,this).toDays();return millennium_month_1.MillenniumMonth.getMonthByDayInYear(i,e)}getDayOfMonth(){let e=(new millennium_date_builder_1.MillenniumDateBuilder).withYear(this.getYear()).withMonth(this.getMonth()).build();return Math.floor(millennium_timespan_1.MillenniumTimespan.between(e,this).toDays())+1}getHourOfDay24HourZeroIndexed(){let e=(new millennium_date_builder_1.MillenniumDateBuilder).withYear(this.getYear()).withMonth(this.getMonth()).withDay(this.getDayOfMonth()).build();return Math.floor(millennium_timespan_1.MillenniumTimespan.between(e,this).toHours())}getHourOfDay24Hour(){let e=this.getHourOfDay24HourZeroIndexed();return 0===e?12:e+1}getHourOfDay12Hour(){return this.getHourOfDay24Hour()%13}get12HourPeriod(){return this.getHourOfDay24HourZeroIndexed()>12?"PM":"AM"}getMinuteOfHour(){let e=(new millennium_date_builder_1.MillenniumDateBuilder).withYear(this.getYear()).withMonth(this.getMonth()).withDay(this.getDayOfMonth()).withHours(this.getHourOfDay24HourZeroIndexed()).build();return Math.floor(millennium_timespan_1.MillenniumTimespan.between(e,this).toMinutes())}getSecondOfMinute(){let e=(new millennium_date_builder_1.MillenniumDateBuilder).withYear(this.getYear()).withMonth(this.getMonth()).withDay(this.getDayOfMonth()).withHours(this.getHourOfDay24HourZeroIndexed()).withMinutes(this.getMinuteOfHour()).build();return Math.floor(millennium_timespan_1.MillenniumTimespan.between(e,this).toSeconds())}getMillisecondOfSecond(){let e=(new millennium_date_builder_1.MillenniumDateBuilder).withYear(this.getYear()).withMonth(this.getMonth()).withDay(this.getDayOfMonth()).withHours(this.getHourOfDay24HourZeroIndexed()).withMinutes(this.getMinuteOfHour()).withSeconds(this.getSecondOfMinute()).build();return Math.floor(millennium_timespan_1.MillenniumTimespan.between(e,this).toMilliseconds())}getUTCOffset(){return this.offsetHours}getEpochTime(){return this.epochTime}getAdjustedEpochTime(){return this.getEpochTime()+this.getUTCOffset()*millennium_time_unit_1.MillenniumTimeUnit.HOUR.getMilliseconds()}toString(){let e=this.getMonth().getMonthName(),t=this.getDayOfMonth(),i=millennium_date_math_1.MillenniumDateMath.getOrdinalIndicator(t),n=this.getYear(),l="(UTC"+(this.getUTCOffset()>=0?"+":"")+this.getUTCOffset()+")",u=this.getHourOfDay12Hour().toString(),r=this.getMinuteOfHour().toString(),m=this.getSecondOfMinute().toString(),o=this.getMillisecondOfSecond().toString(),a=this.get12HourPeriod();for(;r.length<2;)r="0"+r;for(;m.length<2;)m="0"+m;for(;o.length<3;)o="0"+o;return e+" "+t+i+", "+n+" "+l+" "+u+":"+r+":"+m+"."+o+" "+a}}MillenniumDate.EPOCH_YEAR=1970,exports.MillenniumDate=MillenniumDate;
//# sourceMappingURL=millennium-date.js.map
